<html>
<head>
	
	<title>Codeforces 452 Div2</title>
	<meta name="keywords" content="fzb.me,冯宗宝,冯宗宝的blog" />

    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

    
	   <link href="/css/main.css?v=3" rel="stylesheet" type="text/css" />
    
        
<script src="/js/util.js"></script>

        <script>
            if(isMobile()) {
                loadjscssfile('../css/mobile.css', 'css');
            } else {
                loadjscssfile('../css/desktop.css', 'css');
            }
        </script> 
    

    <link rel="alternate" type="application/atom+xml" href="/atom.xml" title="Atom feed">

    
	<link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=3"/>
    
    

<meta name="generator" content="Hexo 6.2.0"></head>

<body>


<h2 class="title">Codeforces 452 Div2</h2>
<!--
<div style="text-align:center;margin-top: -10px;">
<div class="article-category">
发表于2017年12月21日


    <a class="article-category-link" href="/categories/%E9%A2%98%E8%AE%B0/">题记</a>



 </div>
-->
</div>


<p>真是忘了初心，越写越差。。。</p>
<p>写个总结吧，怎么能这么菜啊。。。</p>
<span id="more"></span>

<p>B题差了一个！号判断错了。。。</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">vector&lt;<span class="type">int</span>&gt;ans;</span><br><span class="line"><span class="function"><span class="type">bool</span> <span class="title">check</span><span class="params">(<span class="type">int</span> x)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">if</span>(x%<span class="number">400</span>==<span class="number">0</span>)<span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">	<span class="keyword">if</span>((x%<span class="number">4</span>==<span class="number">0</span>)&amp;&amp;(x%<span class="number">100</span>!=<span class="number">0</span>))</span><br><span class="line">		<span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">	<span class="keyword">if</span>(x%<span class="number">4</span>==<span class="number">0</span>)</span><br><span class="line">		<span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">	<span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">solve</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="built_in">repp</span>(i,<span class="number">1</span>,<span class="number">5000</span>)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="keyword">if</span>(!<span class="built_in">check</span>(i))</span><br><span class="line">		&#123;</span><br><span class="line">			ans.<span class="built_in">push_back</span>(<span class="number">31</span>);</span><br><span class="line">			ans.<span class="built_in">push_back</span>(<span class="number">28</span>);</span><br><span class="line">			ans.<span class="built_in">push_back</span>(<span class="number">31</span>);</span><br><span class="line">			ans.<span class="built_in">push_back</span>(<span class="number">30</span>);</span><br><span class="line">			ans.<span class="built_in">push_back</span>(<span class="number">31</span>);</span><br><span class="line"></span><br><span class="line">			ans.<span class="built_in">push_back</span>(<span class="number">30</span>);</span><br><span class="line">			ans.<span class="built_in">push_back</span>(<span class="number">31</span>);</span><br><span class="line">			ans.<span class="built_in">push_back</span>(<span class="number">31</span>);</span><br><span class="line">			ans.<span class="built_in">push_back</span>(<span class="number">30</span>);</span><br><span class="line">			ans.<span class="built_in">push_back</span>(<span class="number">31</span>);</span><br><span class="line">			ans.<span class="built_in">push_back</span>(<span class="number">30</span>);</span><br><span class="line">			ans.<span class="built_in">push_back</span>(<span class="number">31</span>);</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">else</span></span><br><span class="line">		&#123;</span><br><span class="line">			ans.<span class="built_in">push_back</span>(<span class="number">31</span>);</span><br><span class="line">			ans.<span class="built_in">push_back</span>(<span class="number">29</span>);</span><br><span class="line">			ans.<span class="built_in">push_back</span>(<span class="number">31</span>);</span><br><span class="line">			ans.<span class="built_in">push_back</span>(<span class="number">30</span>);</span><br><span class="line">			ans.<span class="built_in">push_back</span>(<span class="number">31</span>);</span><br><span class="line"></span><br><span class="line">			ans.<span class="built_in">push_back</span>(<span class="number">30</span>);</span><br><span class="line">			ans.<span class="built_in">push_back</span>(<span class="number">31</span>);</span><br><span class="line">			ans.<span class="built_in">push_back</span>(<span class="number">31</span>);</span><br><span class="line">			ans.<span class="built_in">push_back</span>(<span class="number">30</span>);</span><br><span class="line">			ans.<span class="built_in">push_back</span>(<span class="number">31</span>);</span><br><span class="line">			ans.<span class="built_in">push_back</span>(<span class="number">30</span>);</span><br><span class="line">			ans.<span class="built_in">push_back</span>(<span class="number">31</span>);</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="type">int</span> n;</span><br><span class="line">	<span class="built_in">sa</span>(n);</span><br><span class="line">	vector&lt;<span class="type">int</span>&gt;v;</span><br><span class="line">	<span class="built_in">rep</span>(i,<span class="number">0</span>,n)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="type">int</span> x;</span><br><span class="line">		<span class="built_in">sa</span>(x);</span><br><span class="line">		v.<span class="built_in">push_back</span>(x);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="built_in">rep</span>(i,<span class="number">0</span>,ans.<span class="built_in">size</span>())</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="keyword">if</span>(ans[i]==v[<span class="number">0</span>])</span><br><span class="line">		&#123;</span><br><span class="line">			<span class="type">int</span> flag = <span class="number">1</span>;</span><br><span class="line">			<span class="keyword">for</span>(<span class="type">int</span> k=<span class="number">0</span>;k&lt;v.<span class="built_in">size</span>();k++)</span><br><span class="line">			&#123;</span><br><span class="line">				<span class="keyword">if</span>(i+k&gt;=ans.<span class="built_in">size</span>())</span><br><span class="line">				&#123;</span><br><span class="line">					flag=<span class="number">0</span>;</span><br><span class="line">					<span class="keyword">break</span>;</span><br><span class="line">				&#125;</span><br><span class="line">				<span class="keyword">if</span>(ans[i+k]!=v[k])</span><br><span class="line">				&#123;</span><br><span class="line">					flag=<span class="number">0</span>;</span><br><span class="line">					<span class="keyword">break</span>;</span><br><span class="line">				&#125;</span><br><span class="line">			&#125;</span><br><span class="line">			<span class="keyword">if</span>(flag)</span><br><span class="line">			&#123;</span><br><span class="line">				<span class="built_in">puts</span>(<span class="string">&quot;YES&quot;</span>);</span><br><span class="line">				<span class="keyword">return</span>;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="built_in">puts</span>(<span class="string">&quot;NO&quot;</span>);</span><br><span class="line">	<span class="keyword">return</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>大部分时间卡在D题上了，写出来的时候已经还剩半个小时了。<del>一会看一下D题自己思路哪里不好了</del></p>
<p>我的方法是找规律。。。首先找到5，50，500，5000。。。这样的节点，然后发现在已添加的数里面增加的对数是1+2+3这样子的，特殊的就是已9结尾的数字，再把这个减掉就好了。感觉还是麻烦了啊？</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><span class="line">ll v5[<span class="number">20</span>];</span><br><span class="line"></span><br><span class="line"><span class="function">ll <span class="title">cal</span><span class="params">(ll x,ll y,ll m)</span><span class="comment">//&lt;=x y的数量</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	ll h = x/m;</span><br><span class="line">	h += (x%m==y?<span class="number">1</span>:<span class="number">0</span>);</span><br><span class="line">	<span class="keyword">return</span> h;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">solve</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	ll x = <span class="number">5</span>;</span><br><span class="line">	<span class="built_in">repp</span>(i,<span class="number">1</span>,<span class="number">10</span>)</span><br><span class="line">	&#123;</span><br><span class="line">		v5[i]=x;</span><br><span class="line">		x*=<span class="number">10</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	ll k;</span><br><span class="line">	<span class="built_in">slla</span>(k);</span><br><span class="line">	<span class="keyword">if</span>(k==<span class="number">1</span>)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="built_in">puts</span>(<span class="string">&quot;0&quot;</span>);</span><br><span class="line">		<span class="keyword">return</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">if</span>(k==<span class="number">2</span>)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="built_in">puts</span>(<span class="string">&quot;1&quot;</span>);</span><br><span class="line">		<span class="keyword">return</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">if</span>(k==<span class="number">3</span>)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="built_in">puts</span>(<span class="string">&quot;3&quot;</span>);</span><br><span class="line">		<span class="keyword">return</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">if</span>(k==<span class="number">4</span>)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="built_in">puts</span>(<span class="string">&quot;6&quot;</span>);</span><br><span class="line">		<span class="keyword">return</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="type">int</span> pos = <span class="built_in">upper_bound</span>(v5+<span class="number">1</span>,v5+<span class="number">10</span>+<span class="number">1</span>,k)-v5;</span><br><span class="line">	pos--;</span><br><span class="line">	ll d = <span class="number">10</span>;</span><br><span class="line">	<span class="built_in">rep</span>(i,<span class="number">1</span>,pos)</span><br><span class="line">	&#123;</span><br><span class="line">		d*=<span class="number">10</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	ll cnt = (k-v5[pos]+<span class="number">1</span>)/d;</span><br><span class="line">	ll <span class="keyword">final</span> = v5[pos]+cnt*d<span class="number">-1</span>;</span><br><span class="line">	ll ans = (<span class="number">1</span>+cnt)*cnt/<span class="number">2</span>*d;</span><br><span class="line">	ans+=(k-<span class="keyword">final</span>)*(cnt+<span class="number">1</span>);</span><br><span class="line">	ll p = <span class="number">9</span>;</span><br><span class="line">	ll m = <span class="number">10</span>;</span><br><span class="line">	<span class="built_in">rep</span>(i,<span class="number">1</span>,pos)</span><br><span class="line">	&#123;</span><br><span class="line">		p=p*<span class="number">10</span>+<span class="number">9</span>;</span><br><span class="line">		m=m*<span class="number">10</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	ans-=<span class="built_in">cal</span>(k,p,m);</span><br><span class="line">	cout&lt;&lt;ans&lt;&lt;endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>E题自己之前做过51nod上的<a target="_blank" rel="noopener" href="http://www.51nod.com/onlineJudge/questionCode.html#!problemId=1053">最大M子段和V2</a>，然而E题到最后还是没调出来。。。。</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br></pre></td><td class="code"><pre><span class="line">ll n, m;</span><br><span class="line">ll v[maxn], val[maxn], le[maxn], ri[maxn];</span><br><span class="line">ll pos_val[maxn];</span><br><span class="line">set&lt; pair&lt;ll, <span class="type">int</span>&gt; &gt;heap;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">del</span><span class="params">(<span class="type">int</span> x)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="type">int</span> Le = le[x], Ri = ri[x];</span><br><span class="line">	<span class="keyword">if</span> (Le)</span><br><span class="line">		ri[Le] = Ri;</span><br><span class="line">	<span class="keyword">if</span> (Ri)</span><br><span class="line">		le[Ri] = Le;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">solve</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="built_in">slla</span>(n);</span><br><span class="line">	<span class="built_in">repp</span>(i, <span class="number">1</span>, n)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="built_in">slla</span>(v[i]);</span><br><span class="line">	&#125;</span><br><span class="line">	v[<span class="number">0</span>] = <span class="number">-1</span>;</span><br><span class="line"></span><br><span class="line">	<span class="type">int</span> cnt = <span class="number">1</span>;</span><br><span class="line">	<span class="type">int</span> len = <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">	<span class="built_in">repp</span>(i, <span class="number">2</span>, n)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="keyword">if</span> (v[i] != v[i - <span class="number">1</span>])</span><br><span class="line">		&#123;</span><br><span class="line">			val[cnt] = len;</span><br><span class="line">			pos_val[cnt] = v[i - <span class="number">1</span>];</span><br><span class="line">			heap.<span class="built_in">insert</span>(<span class="built_in">make_pair</span>(-len, cnt));</span><br><span class="line">			cnt++;</span><br><span class="line">			len = <span class="number">1</span>;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">else</span></span><br><span class="line">		&#123;</span><br><span class="line">			len++;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	pos_val[cnt] = v[n];</span><br><span class="line">	val[cnt] = len;</span><br><span class="line">	heap.<span class="built_in">insert</span>(<span class="built_in">make_pair</span>(-len, cnt));</span><br><span class="line">	<span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt;= cnt; i++)</span><br><span class="line">	&#123;</span><br><span class="line">		le[i] = i - <span class="number">1</span>, ri[i] = (i == cnt ? <span class="number">0</span> : i + <span class="number">1</span>);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="type">int</span> ans = <span class="number">0</span>;</span><br><span class="line">	<span class="type">int</span> k, j;</span><br><span class="line">	<span class="keyword">while</span> (<span class="literal">true</span>)</span><br><span class="line">	&#123;</span><br><span class="line">		ans++;</span><br><span class="line">		<span class="keyword">if</span> (heap.<span class="built_in">size</span>() == <span class="number">1</span>)</span><br><span class="line">		&#123;</span><br><span class="line">			<span class="keyword">break</span>;</span><br><span class="line">		&#125;</span><br><span class="line">		k = heap.<span class="built_in">begin</span>()-&gt;second, j = heap.<span class="built_in">begin</span>()-&gt;first, heap.<span class="built_in">erase</span>(heap.<span class="built_in">begin</span>());</span><br><span class="line">		<span class="keyword">if</span> (pos_val[le[k]] == pos_val[ri[k]])</span><br><span class="line">		&#123;</span><br><span class="line">			<span class="type">int</span> sum = (val[le[k]] + val[ri[k]]);</span><br><span class="line">			heap.<span class="built_in">erase</span>(<span class="built_in">make_pair</span>(-(val[le[k]]), le[k]));</span><br><span class="line">			heap.<span class="built_in">erase</span>(<span class="built_in">make_pair</span>(-(val[ri[k]]), ri[k]));</span><br><span class="line">			<span class="type">int</span> t = le[k];</span><br><span class="line">			val[ri[k]] = <span class="number">0</span>;</span><br><span class="line">			<span class="built_in">del</span>(ri[k]);</span><br><span class="line">			<span class="built_in">del</span>(k);</span><br><span class="line">			val[k] = <span class="number">0</span>;</span><br><span class="line">			val[t] = sum;</span><br><span class="line">			heap.<span class="built_in">insert</span>(<span class="built_in">make_pair</span>(-(sum), t));</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">else</span></span><br><span class="line">		&#123;</span><br><span class="line">			val[k] = <span class="number">0</span>;</span><br><span class="line">			<span class="built_in">del</span>(k);</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	cout &lt;&lt; ans &lt;&lt; endl;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>F题主要是不知道字符串怎么向前移动啊，思路卡在这里了啊。。。</p>
<p>啊，原来。。。树状数组就可以做这种事啊。。。为什么我。。。到现在还不知道啊。。。</p>
<p>哦。。。原来就是二分就可以了，多一个log。。。就是给定一个前缀和K，要求的就是前缀和为K的位置。二分查找就做到两个log了。谷歌面试的时候问到过一个log的想法。</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> n, m;</span><br><span class="line"><span class="type">int</span> val[<span class="number">300</span>];</span><br><span class="line">set&lt;<span class="type">int</span>&gt;pos[<span class="number">300</span>];</span><br><span class="line"><span class="type">char</span> v[maxn];</span><br><span class="line">ll num[maxn];</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">lowbit</span><span class="params">(<span class="type">int</span> x)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">return</span> x&amp;(-x);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function">ll <span class="title">getsum</span><span class="params">(ll x)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	ll ans = <span class="number">0</span>;</span><br><span class="line">	<span class="keyword">while</span> (x&gt;<span class="number">0</span>)</span><br><span class="line">	&#123;</span><br><span class="line">		ans += num[x];</span><br><span class="line">		x -= <span class="built_in">lowbit</span>(x);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> ans;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function">ll <span class="title">add</span><span class="params">(<span class="type">int</span> x, <span class="type">int</span> v)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="type">int</span> up = maxn - <span class="number">1</span>;</span><br><span class="line">	<span class="keyword">while</span> (x &lt;= up)</span><br><span class="line">	&#123;</span><br><span class="line">		num[x] += v;</span><br><span class="line">		x += <span class="built_in">lowbit</span>(x);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> x;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">find_p</span><span class="params">(<span class="type">int</span> k)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="type">int</span> le = <span class="number">1</span>, ri = n;</span><br><span class="line">	<span class="keyword">while</span> (le &lt; ri)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="type">int</span> mid = (le + ri) / <span class="number">2</span>;</span><br><span class="line">		<span class="keyword">if</span> (<span class="built_in">getsum</span>(mid) &lt; k)</span><br><span class="line">		&#123;</span><br><span class="line">			le = mid + <span class="number">1</span>;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">else</span></span><br><span class="line">		&#123;</span><br><span class="line">			ri = mid;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> le;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">solve</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="built_in">sa</span>(n), <span class="built_in">sa</span>(m);</span><br><span class="line">	<span class="built_in">scanf</span>(<span class="string">&quot;%s&quot;</span>, v + <span class="number">1</span>);</span><br><span class="line">	<span class="built_in">repp</span>(i, <span class="number">1</span>, n)</span><br><span class="line">	&#123;</span><br><span class="line">		pos[v[i]].<span class="built_in">insert</span>(i);</span><br><span class="line">		<span class="built_in">add</span>(i, <span class="number">1</span>);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="built_in">repp</span>(i, <span class="number">1</span>, m)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="type">int</span> le, ri;</span><br><span class="line">		<span class="type">char</span> op[<span class="number">5</span>];</span><br><span class="line">		<span class="built_in">scanf</span>(<span class="string">&quot;%d%d%s&quot;</span>, &amp;le, &amp;ri, op);</span><br><span class="line">		<span class="type">char</span> k = op[<span class="number">0</span>];</span><br><span class="line">		le = <span class="built_in">find_p</span>(le);</span><br><span class="line">		ri = <span class="built_in">find_p</span>(ri);</span><br><span class="line"></span><br><span class="line">		<span class="keyword">auto</span> p = pos[k].<span class="built_in">lower_bound</span>(le);</span><br><span class="line">		<span class="keyword">while</span> (p != pos[k].<span class="built_in">end</span>()&amp;&amp;*p &lt;= ri)</span><br><span class="line">		&#123;</span><br><span class="line">			<span class="built_in">add</span>(*p, <span class="number">-1</span>);</span><br><span class="line">			<span class="keyword">auto</span> t = p;</span><br><span class="line">			p++;</span><br><span class="line">			pos[k].<span class="built_in">erase</span>(t);</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="built_in">repp</span>(i, <span class="number">1</span>, n)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="keyword">if</span> (<span class="built_in">getsum</span>(i) - <span class="built_in">getsum</span>(i - <span class="number">1</span>))</span><br><span class="line">		&#123;</span><br><span class="line">			<span class="built_in">printf</span>(<span class="string">&quot;%c&quot;</span>, v[i]);</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>





<!--<a href="http://2997ms.github.io/2017/12/21/CP/Codeforces/Codeforces-452-Div2/#disqus_thread" class="article-comment-link">Comments</a>
<div id="disqus_thread"></div>
<script type="text/javascript">
    /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
    var disqus_shortname = ''; // required: replace example with your forum shortname

    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>Please enable JavaScript to view the <a target="_blank" rel="noopener" href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
-->
<div style="display:none">
<script src="http://s4.cnzz.com/stat.php?id=&web_id=" language="JavaScript"></script>script>
</div>






</body>
</html>