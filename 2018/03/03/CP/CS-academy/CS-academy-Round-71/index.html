<html>
<head>
	
	<title>CS academy Round 71</title>
	<meta name="keywords" content="fzb.me,冯宗宝,冯宗宝的blog" />

    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

    
	   <link href="/css/main.css?v=3" rel="stylesheet" type="text/css" />
    
        
<script src="/js/util.js"></script>

        <script>
            if(isMobile()) {
                loadjscssfile('../css/mobile.css', 'css');
            } else {
                loadjscssfile('../css/desktop.css', 'css');
            }
        </script> 
    

    <link rel="alternate" type="application/atom+xml" href="/atom.xml" title="Atom feed">

    
	<link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=3"/>
    
    

<meta name="generator" content="Hexo 6.2.0"></head>

<body>


<h2 class="title">CS academy Round 71</h2>
<!--
<div style="text-align:center;margin-top: -10px;">
<div class="article-category">
发表于2018年3月3日


    <a class="article-category-link" href="/categories/%E9%A2%98%E8%AE%B0/">题记</a>



 </div>
-->
</div>

<ol class="toc"><li class="toc-item toc-level-3"><a class="toc-link" href="#D-Russian-Dolls"><span class="toc-text">D Russian Dolls</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#E-Losing-Nim"><span class="toc-text">E Losing Nim</span></a></li></ol>
<p>CS academy Round 71</p>
<span id="more"></span>

<p><a target="_blank" rel="noopener" href="https://csacademy.com/contest/round-71/tasks/">题目链接</a></p>
<h3 id="D-Russian-Dolls"><a href="#D-Russian-Dolls" class="headerlink" title="D Russian Dolls"></a>D Russian Dolls</h3><blockquote>
<p>N个球每一个球有对应的大小，小的球可以嵌套在大的球里面。一个球只可以嵌套一个小球，但是可以递归嵌套。现在可以使$1$个大小为$X$的球变成$2$个大小为$X-1$的球，要求最终没有办法嵌套的时候，每一个球的大小是相同的。问最少操作多少次。</p>
</blockquote>
<p>最终达到的情况就是最大的球数量最多。</p>
<p>从当前最大的球的数量开始枚举，看需要多少次操作。之后把最大的球变成两个次大的球，再枚举当前的数量需要多少次操作。</p>
<p>复杂度$O(log^2N)$。</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br></pre></td><td class="code"><pre><span class="line">ll n;</span><br><span class="line">map&lt;ll, ll&gt;hax;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">split</span><span class="params">(map&lt;ll, ll&gt;&amp;h, <span class="type">int</span> mx)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="type">int</span> value, num;</span><br><span class="line">	<span class="built_in">tie</span>(value, num) = *h.<span class="built_in">rbegin</span>();</span><br><span class="line"></span><br><span class="line">	<span class="keyword">if</span> (num &lt; mx || value == <span class="number">1</span>)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	h[value] = mx;</span><br><span class="line">	h[value - <span class="number">1</span>] += (num - mx) * <span class="number">2</span>;</span><br><span class="line">	<span class="keyword">return</span> num - mx;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">cal</span><span class="params">(map&lt;ll, ll&gt;h, <span class="type">int</span> up)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="type">int</span> ans = <span class="number">0</span>;</span><br><span class="line">	<span class="keyword">while</span> (h.<span class="built_in">size</span>())</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="type">int</span> cur = <span class="built_in">split</span>(h, up);</span><br><span class="line">		<span class="keyword">if</span> (cur &gt;= up)<span class="keyword">return</span> <span class="number">1e9</span>;</span><br><span class="line">		ans += cur;</span><br><span class="line"></span><br><span class="line">		<span class="type">int</span> value, num;</span><br><span class="line">		<span class="built_in">tie</span>(value, num) = *h.<span class="built_in">rbegin</span>();</span><br><span class="line">		<span class="keyword">if</span> (value == <span class="number">1</span>)</span><br><span class="line">		&#123;</span><br><span class="line">			<span class="keyword">if</span> (num&gt;up)</span><br><span class="line">			&#123;</span><br><span class="line">				<span class="keyword">return</span> <span class="number">1e9</span>;</span><br><span class="line">			&#125;</span><br><span class="line">			<span class="keyword">break</span>;</span><br><span class="line">		&#125;</span><br><span class="line">		h.<span class="built_in">erase</span>(value);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> ans;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">solve</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="built_in">slla</span>(n);</span><br><span class="line">	<span class="type">int</span> maxx = <span class="number">0</span>;</span><br><span class="line">	<span class="built_in">repp</span>(i, <span class="number">1</span>, n)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="type">int</span> x;</span><br><span class="line">		<span class="built_in">sa</span>(x);</span><br><span class="line">		hax[x]++;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="type">int</span> ans = <span class="number">1e9</span>;</span><br><span class="line">	<span class="type">int</span> cnt = <span class="number">0</span>;</span><br><span class="line">	<span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i&lt;<span class="number">30</span> &amp;&amp; hax.<span class="built_in">size</span>(); i++)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="type">int</span> value, num;</span><br><span class="line">		<span class="built_in">tie</span>(value, num) = *hax.<span class="built_in">rbegin</span>();</span><br><span class="line">		<span class="type">int</span> tmp = cnt + <span class="built_in">cal</span>(hax, num);</span><br><span class="line">		ans = <span class="built_in">min</span>(ans, tmp);</span><br><span class="line"></span><br><span class="line">		cnt += <span class="built_in">split</span>(hax, <span class="number">0</span>);</span><br><span class="line">		hax.<span class="built_in">erase</span>(hax.<span class="built_in">rbegin</span>()-&gt;first);</span><br><span class="line"></span><br><span class="line">		<span class="keyword">if</span> (hax.<span class="built_in">size</span>() &amp;&amp; hax.<span class="built_in">rbegin</span>()-&gt;second &gt;= n)</span><br><span class="line">		&#123;</span><br><span class="line">			ans = <span class="built_in">min</span>(ans, cnt);</span><br><span class="line">			<span class="keyword">break</span>;</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">	&#125;</span><br><span class="line">	cout &lt;&lt; ans &lt;&lt; endl;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="E-Losing-Nim"><a href="#E-Losing-Nim" class="headerlink" title="E Losing Nim"></a>E Losing Nim</h3><blockquote>
<p>输出将和为$N$的数分成$K$堆，异或为$0$的方案数。每一堆至少为$1$，$K$从$1$到$N$。$1&lt;N&lt;500$</p>
</blockquote>
<p>上来写了一个$O(N^4)$的dp。。。然后看着里面做的都是重复的操作，但是就不知道怎么优化到$O(N^3)$。</p>
<p>ans[i][j][k]表示到第i堆，和为j，异或为k的方案数，然后枚举最后一个堆的情况。</p>
<p>TLE。</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">ll n,p;</span><br><span class="line">ll ans[<span class="number">505</span>][<span class="number">505</span>][<span class="number">520</span>];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">solve</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">slla</span>(n),<span class="built_in">slla</span>(p);</span><br><span class="line">    <span class="built_in">repp</span>(i,<span class="number">1</span>,n)</span><br><span class="line">    &#123;</span><br><span class="line">        ans[<span class="number">1</span>][i][i]=<span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    cout&lt;&lt;<span class="number">0</span>&lt;&lt;endl;</span><br><span class="line">    <span class="built_in">repp</span>(i,<span class="number">2</span>,n)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">repp</span>(last,<span class="number">1</span>,n)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="built_in">repp</span>(presum,i<span class="number">-1</span>,n)</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">if</span>(last+presum&gt;n)</span><br><span class="line">                &#123;</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="built_in">repp</span>(prexor, <span class="number">0</span>, <span class="number">512</span>)</span><br><span class="line">                &#123;</span><br><span class="line">                    ans[i][last + presum][last ^ prexor] += ans[i - <span class="number">1</span>][presum][prexor];</span><br><span class="line">                    ans[i][last + presum][last ^ prexor] %= p;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;%lld\n&quot;</span>,ans[i][n][<span class="number">0</span>]);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>后来问别人，发现可以dp[i][k]表示前i位和为k，异或为0的方案数。里面通过组合数转移。</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line">ll n,p;</span><br><span class="line">ll C[<span class="number">505</span>][<span class="number">505</span>];</span><br><span class="line">ll dp[<span class="number">505</span>][<span class="number">505</span>];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">solve</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">slla</span>(n),<span class="built_in">slla</span>(p);</span><br><span class="line">    C[<span class="number">0</span>][<span class="number">0</span>] = <span class="number">1</span>;</span><br><span class="line">    <span class="built_in">repp</span>(i,<span class="number">1</span>,n)</span><br><span class="line">    &#123;</span><br><span class="line">        C[i][<span class="number">0</span>]=<span class="number">1</span>;</span><br><span class="line">        <span class="built_in">repp</span>(j,<span class="number">1</span>,i)</span><br><span class="line">        &#123;</span><br><span class="line">            C[i][j] = C[i<span class="number">-1</span>][j<span class="number">-1</span>] + C[i<span class="number">-1</span>][j];</span><br><span class="line">            C[i][j] %= p;</span><br><span class="line">            <span class="comment">//DE(C[i][j])</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">repp</span>(i,<span class="number">1</span>,n)</span><br><span class="line">    &#123;</span><br><span class="line">        dp[i][<span class="number">0</span>] = <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    ll w = <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">while</span>(w &lt;= n)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">repp</span>(i,<span class="number">2</span>,n)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">for</span>(<span class="type">int</span> j=n;j&gt;=<span class="number">0</span>;j--)</span><br><span class="line">            &#123;</span><br><span class="line">               <span class="keyword">for</span>(<span class="type">int</span> k=<span class="number">1</span>;k&lt;=n;k++)</span><br><span class="line">               &#123;</span><br><span class="line">                   <span class="keyword">if</span>(!dp[i][j])<span class="keyword">continue</span>;</span><br><span class="line">                   <span class="keyword">if</span>(j + <span class="number">2</span>*k*w &lt;= n &amp;&amp; <span class="number">2</span>*k &lt;= i) &#123;</span><br><span class="line">                       dp[i][j + <span class="number">2</span> * k * w] += dp[i][j] * C[i][<span class="number">2</span> * k] % p;</span><br><span class="line">                       dp[i][j + <span class="number">2</span> * k * w] %= p;</span><br><span class="line">                   &#125;</span><br><span class="line">                   <span class="keyword">else</span></span><br><span class="line">                   &#123;</span><br><span class="line">                       <span class="keyword">break</span>;</span><br><span class="line">                   &#125;</span><br><span class="line">               &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        w *= <span class="number">2</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">repp</span>(i,<span class="number">1</span>,n)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">rep</span>(j,<span class="number">1</span>,i)</span><br><span class="line">        &#123;</span><br><span class="line">            dp[i][n] -= dp[j][n]*C[i][j] % p;</span><br><span class="line">            dp[i][n] = (dp[i][n] % p + p) % p;</span><br><span class="line">        &#125;</span><br><span class="line">        cout&lt;&lt;dp[i][n]&lt;&lt;endl;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<!--<a href="http://2997ms.github.io/2018/03/03/CP/CS-academy/CS-academy-Round-71/#disqus_thread" class="article-comment-link">Comments</a>
<div id="disqus_thread"></div>
<script type="text/javascript">
    /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
    var disqus_shortname = ''; // required: replace example with your forum shortname

    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>Please enable JavaScript to view the <a target="_blank" rel="noopener" href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
-->
<div style="display:none">
<script src="http://s4.cnzz.com/stat.php?id=&web_id=" language="JavaScript"></script>script>
</div>






</body>
</html>