<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="theme-color" content="#222" media="(prefers-color-scheme: light)">
<meta name="theme-color" content="#222" media="(prefers-color-scheme: dark)"><meta name="generator" content="Hexo 6.2.0">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">



<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.2/css/all.min.css" integrity="sha256-xejo6yLi6vGtAjcMIsY8BHdKsLg7QynVlFMzdQgUuy8=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.1.1/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous">

<script class="next-config" data-name="main" type="application/json">{"hostname":"2997ms.github.io","root":"/","images":"/images","scheme":"Mist","darkmode":true,"version":"8.12.3","exturl":false,"sidebar":{"position":"left","Muse | Mist":320,"display":"post","padding":18,"offset":12},"copycode":{"enable":false,"style":null},"bookmark":{"enable":false,"color":"#222","save":"auto"},"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"stickytabs":false,"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"prism":false,"i18n":{"placeholder":"Searching...","empty":"We didn't find any results for the search: ${query}","hits_time":"${hits} results found in ${time} ms","hits":"${hits} results found"}}</script><script src="/js/config.js"></script>

    <meta property="og:type" content="website">
<meta property="og:title" content="2997ms">
<meta property="og:url" content="http://2997ms.github.io/page/10/index.html">
<meta property="og:site_name" content="2997ms">
<meta property="og:locale" content="en_US">
<meta property="article:author" content="2997ms">
<meta name="twitter:card" content="summary">


<link rel="canonical" href="http://2997ms.github.io/page/10/">



<script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":true,"isPost":false,"lang":"en","comments":"","permalink":"","path":"page/10/index.html","title":""}</script>

<script class="next-config" data-name="calendar" type="application/json">""</script>
<title>2997ms</title>
  






  <noscript>
    <link rel="stylesheet" href="/css/noscript.css">
  </noscript>
</head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar" role="button">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <h1 class="site-title">2997ms</h1>
      <i class="logo-line"></i>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu"><li class="menu-item menu-item-home"><a href="/" rel="section">Home</a></li><li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>Categories</a></li><li class="menu-item menu-item-mandarin-posts"><a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>Mandarin posts</a></li>
  </ul>
</nav>




</div>
        
  
  <div class="toggle sidebar-toggle" role="button">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>

  <aside class="sidebar">

    <div class="sidebar-inner sidebar-overview-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author site-overview-item animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">2997ms</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap site-overview-item animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
        <a href="/archives/">
          <span class="site-state-item-count">132</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
          <a href="/categories/">
        <span class="site-state-item-count">6</span>
        <span class="site-state-item-name">categories</span></a>
      </div>
      <div class="site-state-item site-state-tags">
          <a href="/tags/">
        <span class="site-state-item-count">65</span>
        <span class="site-state-item-name">tags</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author site-overview-item animated">
      <span class="links-of-author-item">
        <a href="https://github.com/2997ms" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;2997ms" rel="noopener" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="mailto:wangchong756@gmail.com" title="E-Mail → mailto:wangchong756@gmail.com" rel="noopener" target="_blank"><i class="fa fa-envelope fa-fw"></i>E-Mail</a>
      </span>
  </div>



        </div>
      </div>
    </div>
  </aside>
  <div class="sidebar-dimmer"></div>


    </header>

    
  <div class="back-to-top" role="button" aria-label="Back to top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


    <div class="main-inner index posts-expand">
<div>
<h1 className="inline-block whitespace-no-wrap text-grey tracking-wide">Hi, I'm Chong Wang 👋</h1>
</div>
<p>15年开始以代码为乐，持续到现在。很喜欢做算法题，然而很遗憾又不出所料，特别菜。</p>
<p><a target="_blank" rel="noopener" href="http://poj.org/userstatus?user_id=wangchong756">POJ</a>，<a target="_blank" rel="noopener" href="http://codeforces.com/profile/OrangeDream">Codeforces</a>，<a target="_blank" rel="noopener" href="https://www.hackerrank.com/2997ms">Hackerrank</a>，<a target="_blank" rel="noopener" href="https://www.codechef.com/users/wangchong756">Codechef</a>，<a target="_blank" rel="noopener" href="https://leetcode.com/2997ms/">Leetcode</a>，<a target="_blank" rel="noopener" href="http://acm.hdu.edu.cn/userstatus.php?user=wangchong756">HDU</a>，<a target="_blank" rel="noopener" href="https://www.spoj.com/users/wangchong756/">SPOJ</a>，<a target="_blank" rel="noopener" href="https://open.kattis.com/users/2997ms">Kattis</a>，<a target="_blank" rel="noopener" href="https://projecteuler.net/progress=2997ms">Project Euler</a>，<a target="_blank" rel="noopener" href="http://www.51nod.com/User/Index.html#userId=5374">51nod</a></p>
<p>曾经在CDSN上写<a target="_blank" rel="noopener" href="http://blog.csdn.net/u010885899">博客</a>。现在看来之前写得完全不忍直视，希望这里的每一篇都能够认真总结，用力书写。</p>
<p>梦想很简单，希望自己有一天不那么菜，去往自己想去的地方。</p>
<p>感谢生活馈赠我的每一刻。</p>
<p>Email: <a href="mailto:&#x77;&#x61;&#110;&#103;&#99;&#104;&#x6f;&#x6e;&#103;&#x37;&#x35;&#54;&#64;&#x67;&#x6d;&#x61;&#105;&#108;&#x2e;&#x63;&#x6f;&#x6d;">&#x77;&#x61;&#110;&#103;&#99;&#104;&#x6f;&#x6e;&#103;&#x37;&#x35;&#54;&#64;&#x67;&#x6d;&#x61;&#105;&#108;&#x2e;&#x63;&#x6f;&#x6d;</a></p>
<h3 id="Recent post">Recent post:</h3>

    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://2997ms.github.io/2016/12/12/CP/Leetcode/LeetCode-41-50/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="2997ms">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="2997ms">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | 2997ms">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2016/12/12/CP/Leetcode/LeetCode-41-50/" class="post-title-link" itemprop="url">LeetCode 41-50</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2016-12-12 20:43:11" itemprop="dateCreated datePublished" datetime="2016-12-12T20:43:11+00:00">2016-12-12</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2016-12-27 07:46:43" itemprop="dateModified" datetime="2016-12-27T07:46:43+00:00">2016-12-27</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E9%A2%98%E8%AE%B0/" itemprop="url" rel="index"><span itemprop="name">题记</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>再不写blog估计这里就要长草了。。。最近自己在弄程序静态分析这块，提取相关的特征，IDA python 提取程序的操作码以及立即数。最近有面试通知，想了想还是要做LeetCode，于是在赶LeetCode的进度。。。LeetCode现在做到了200+左右，后面会陆续写LeetCode的总结。51nod四级题还差十几个，做完然后好好理一理思路。(都快忘了怎么写blog了。。。)</p>
          <!--noindex-->
            <div class="post-button">
              <a class="btn" href="/2016/12/12/CP/Leetcode/LeetCode-41-50/#more" rel="contents">
                Read more &raquo;
              </a>
            </div>
          <!--/noindex-->
        
      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://2997ms.github.io/2016/11/05/CP/CodeChef/CodeChef-October-Lunchtime-2016/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="2997ms">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="2997ms">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | 2997ms">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2016/11/05/CP/CodeChef/CodeChef-October-Lunchtime-2016/" class="post-title-link" itemprop="url">CodeChef October Lunchtime 2016</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>
      

      <time title="Created: 2016-11-05 11:00:34 / Modified: 14:04:22" itemprop="dateCreated datePublished" datetime="2016-11-05T11:00:34+00:00">2016-11-05</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E9%A2%98%E8%AE%B0/" itemprop="url" rel="index"><span itemprop="name">题记</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p><a target="_blank" rel="noopener" href="https://www.codechef.com/LTIME41">题目链接</a>与<a target="_blank" rel="noopener" href="https://github.com/2997ms/My_Algorithm/tree/master/CodeChef/CodeChef-October-Lunchtime-2016">代码链接</a></p>
<p>访问CodeChef好慢啊。。。</p>
<h3 id="A-The-Largest-Bouquet"><a href="#A-The-Largest-Bouquet" class="headerlink" title="A The Largest Bouquet"></a>A The Largest Bouquet</h3><blockquote>
<p>取树叶，要么是同一颜色的，要么是同一棵树上的。问最大值。</p>
</blockquote>
<p>矩阵里面同一行同一列的最大值。</p>
<h3 id="B-FastFood-Combos"><a href="#B-FastFood-Combos" class="headerlink" title="B FastFood Combos"></a>B FastFood Combos</h3><blockquote>
<p>商店里的每个物品有自己的单价，有各种优惠活动，花$P_i$钱可以购买$Q_i$个产品，问想要购买所有$N$个产品，最少需要花多少钱。</p>
</blockquote>
<p>其实这道题还是要枚举，但是怎么枚举是一个问题。</p>
<p>首先$dp1[x]$表示只通过单一渠道购买到的(要么单买，要么优惠)，然后这里对优惠下有一个$2^n$枚举，得到各种情况下优惠上的最小值。</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">rep</span>(i, <span class="number">0</span>, n)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">&quot;%lld&quot;</span>, &amp;val[i]);</span><br><span class="line">        dp1[<span class="number">1</span> &lt;&lt; i] = val[i];</span><br><span class="line">    &#125;</span><br><span class="line">    dp1[<span class="number">0</span>] = dp2[<span class="number">0</span>] = <span class="number">0</span>;</span><br><span class="line">    <span class="built_in">repp</span>(i, <span class="number">1</span>, m)</span><br><span class="line">    &#123;</span><br><span class="line">        ll mask = <span class="number">0</span>;</span><br><span class="line">        ll p, q;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">&quot;%lld%lld&quot;</span>, &amp;p, &amp;q);</span><br><span class="line">        <span class="built_in">rep</span>(j, <span class="number">0</span>, q)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="type">int</span> x; <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;x);</span><br><span class="line">            x--;</span><br><span class="line">            mask |= (<span class="number">1</span> &lt;&lt; x);</span><br><span class="line">        &#125;</span><br><span class="line">        dp1[mask] = <span class="built_in">min</span>(dp1[mask], (ll)p);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = (<span class="number">1</span> &lt;&lt; n) - <span class="number">1</span>; i &gt;= <span class="number">0</span>; i--)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> k = <span class="number">0</span>; k &lt; n; k++)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span> ((i &gt;&gt; k) &amp; <span class="number">1</span>)</span><br><span class="line">            &#123;</span><br><span class="line">                dp1[i ^ (<span class="number">1</span> &lt;&lt; k)] = <span class="built_in">min</span>(dp1[i ^ (<span class="number">1</span> &lt;&lt; k)], dp1[i]);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

<p>$dp2[x]$表示两种方式混合的最小值，枚举子集也学到了新姿势。。。</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> (<span class="type">int</span> mask = <span class="number">0</span>; mask &lt; (<span class="number">1</span> &lt;&lt; n); mask++)</span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">int</span> submask = (mask - <span class="number">1</span>)&amp;mask;</span><br><span class="line">    dp2[mask] = dp1[mask];</span><br><span class="line">    <span class="keyword">do</span></span><br><span class="line">    &#123;</span><br><span class="line">        dp2[mask] = <span class="built_in">min</span>(dp2[mask], dp2[submask] + dp1[mask^submask]);</span><br><span class="line">        submask = (submask - <span class="number">1</span>)&amp;mask;</span><br><span class="line">    &#125;<span class="keyword">while</span> (submask &gt; <span class="number">0</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>最终结果就是$dp2[(1&lt;&lt;n)-1]$。</p>
<h3 id="C-Restore-the-Permutation"><a href="#C-Restore-the-Permutation" class="headerlink" title="C Restore the Permutation"></a>C Restore the Permutation</h3><blockquote>
<p>$1$到$N$的排列，有两种询问：</p>
<p>$1 \  X \  Y  \  D |A_x-A_y|能否被D整除$</p>
<p>$2 \  X \  Y  \  X是否小于Y$</p>
<p>最多可以提出$N*13$个1类询问，以及$N-1$个2类询问，要求还原数列。</p>
</blockquote>
<p>好难啊。。。$13*N$。。。$N$的范围是$10^4$级别的，很明显是要$log$一下，但是怎么分治呢。。。</p>
<p>分治，先把所有数分成%2&#x3D;1的，以及%2&#x3D;0的，之后对%2&#x3D;0的那部分%4又有两种情况，按照这个分类有什么好处呢，就是比较每个序列的最小值，最后可以直接*2还原。</p>
<h3 id="D-The-Counties"><a href="#D-The-Counties" class="headerlink" title="D The Counties"></a>D The Counties</h3><blockquote>
<p>给出一棵树，这棵树上的点隶属于某个国家，有$Q$个询问，每次问距离某一点$V$最近的一个国家$C$的城市是多远。</p>
</blockquote>
<p>如果是在$10^5$级别，<a target="_blank" rel="noopener" href="http://codeforces.com/problemset/problem/342/E">CF_342E</a>给出了一个分块的。</p>
<p>这个题离线解，树分治，每次找树的重心，深搜一遍，如果是在不同的子树上，每次的结果最小值就是国家$C$在子树上的最小深度与该城市的最小深度之和。如果是在相同的子树上，递归求解。</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://2997ms.github.io/2016/10/24/CP/Leetcode/LeetCode-31-40/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="2997ms">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="2997ms">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | 2997ms">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2016/10/24/CP/Leetcode/LeetCode-31-40/" class="post-title-link" itemprop="url">LeetCode 31-40</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2016-10-24 23:34:16" itemprop="dateCreated datePublished" datetime="2016-10-24T23:34:16+01:00">2016-10-24</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2016-11-10 11:02:08" itemprop="dateModified" datetime="2016-11-10T11:02:08+00:00">2016-11-10</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E9%A2%98%E8%AE%B0/" itemprop="url" rel="index"><span itemprop="name">题记</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>…
          <!--noindex-->
            <div class="post-button">
              <a class="btn" href="/2016/10/24/CP/Leetcode/LeetCode-31-40/#more" rel="contents">
                Read more &raquo;
              </a>
            </div>
          <!--/noindex-->
        
      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://2997ms.github.io/2016/10/24/CP/Codeforces/Codeforces-376-Div2/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="2997ms">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="2997ms">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | 2997ms">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2016/10/24/CP/Codeforces/Codeforces-376-Div2/" class="post-title-link" itemprop="url">Codeforces 376 Div2</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>
      

      <time title="Created: 2016-10-24 19:22:01 / Modified: 12:24:03" itemprop="dateCreated datePublished" datetime="2016-10-24T19:22:01+01:00">2016-10-24</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E9%A2%98%E8%AE%B0/" itemprop="url" rel="index"><span itemprop="name">题记</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p><a target="_blank" rel="noopener" href="http://codeforces.com/contest/731">题目链接</a>与<a target="_blank" rel="noopener" href="https://github.com/2997ms/My_Algorithm/tree/master/Codeforces/376_Div2">代码链接</a></p>
<p>晚上VP了这一场，并查集写脑残了，TLE47。F题关于数据应该注意数据范围，然后根据每一个数字来进行枚举。</p>
<h3 id="A-Night-at-the-Museum"><a href="#A-Night-at-the-Museum" class="headerlink" title="A Night at the Museum"></a>A Night at the Museum</h3><blockquote>
<p>$26$个字母放在一个圆盘上，然后可以顺时针逆时针方向找字母，问总和旋转次数最少是多少。</p>
</blockquote>
<p>每次贪心取最小值。res+&#x3D;min(abs(k-cur),26-abs(k-cur))</p>
<h3 id="B-Coupons-and-Discounts"><a href="#B-Coupons-and-Discounts" class="headerlink" title="B Coupons and Discounts"></a>B Coupons and Discounts</h3><blockquote>
<p>有$n$天，对应每一天要购买相应数量的pizza，有两种购买方式，第一种一天买两个，第二种连续两天买一个。问该安排在这两种购买方式下是否可行。</p>
</blockquote>
<p>从第一天开始贪心，偶数不用管，如果是奇数，那么想要可行下一天必须减1。判断每一天的数量大于等于0，还有最后一天要是偶数。</p>
<h3 id="C-Socks"><a href="#C-Socks" class="headerlink" title="C Socks"></a>C Socks</h3><blockquote>
<p>有n个袜子，k种颜色，m个天。每一天有对应安排，要穿哪两只袜子。问想要满足每一天袜子都一致的情况下，最小更改袜子的颜色数量。</p>
</blockquote>
<p>并查集，把要穿的袜子放在一个集合里面。然后再在每一个集合里面选取出现颜色最多的那种，其他的袜子就要去改成这个颜色。。。</p>
<h3 id="D-80-th-Level-Archeology"><a href="#D-80-th-Level-Archeology" class="headerlink" title="D 80-th Level Archeology"></a>D 80-th Level Archeology</h3><blockquote>
<p>题意是给出了$n$个序列，然后可以对所有序列向后移一位，最后一个$C$的话就变为$1$。问最少移多少位可以满足序列是呈现字典序递增的顺序。</p>
</blockquote>
<p>对两个序列进行比较会发现，是一个合法区间。将所有合法区间进行合并，看有没有满足所有区间的数字。</p>
<h3 id="E-Funny-Game"><a href="#E-Funny-Game" class="headerlink" title="E Funny Game"></a>E Funny Game</h3><blockquote>
<p>题意是有$n$个数，Petya和Gena对这$n$个数按照如下规则去取：每次至少选择数列中最左面前$2$个数，其和计入分数，然后把这个和再次放入该数列的最左面，直到该数列只剩下一个数为止。每个人都希望自己的分数-对手的分数最大，Petya先取，问最优解。</p>
</blockquote>
<p>后来才知道这种博弈是有套路的。。。</p>
<p>$DP[i]$表示对当前玩家来说，取前$[1..i]$数其最优值，那么这个最优值$DP[i]$从哪里转移过来，从左往右取的话，这个最优值是取决于对手取的最优值，即是从右面转移过来的。根据这个可以写一个$O(n^2)$的记忆化$DP$。</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> n;</span><br><span class="line"><span class="type">int</span> val[maxn],sum[maxn],dp[maxn];</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">cal</span><span class="params">(<span class="type">int</span> x)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">if</span>(dp[x]!=<span class="number">-1</span>)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="keyword">return</span> dp[x];</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="type">int</span> res = -INF;</span><br><span class="line">	<span class="keyword">for</span>(<span class="type">int</span> i=x+<span class="number">1</span>;i&lt;=n;i++)</span><br><span class="line">	&#123;</span><br><span class="line">		res=<span class="built_in">max</span>(res,<span class="built_in">cal</span>(i));</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">if</span>(res == -INF)</span><br><span class="line">		res = <span class="number">0</span>;</span><br><span class="line">	dp[x]=sum[x]-res;</span><br><span class="line">	<span class="keyword">return</span> dp[x];</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">solve</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="built_in">memset</span>(dp,<span class="number">-1</span>,<span class="built_in">sizeof</span>(dp));</span><br><span class="line">	<span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>,&amp;n);</span><br><span class="line">	<span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=n;i++)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>,&amp;val[i]);</span><br><span class="line">		sum[i]=sum[i<span class="number">-1</span>]+val[i];</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="type">int</span> res = -INF;</span><br><span class="line">	<span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">2</span>;i&lt;=n;i++)</span><br><span class="line">	&#123;</span><br><span class="line">		res = <span class="built_in">max</span>(res,<span class="built_in">cal</span>(i));</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>,res);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>观察转移，从后转移的话，可以从后往前走，维护这个最大值，得到结果。</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">ll n;</span><br><span class="line">ll val[maxn], sum[maxn];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">solve</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="built_in">scanf</span>(<span class="string">&quot;%lld&quot;</span>, &amp;n);</span><br><span class="line">	<span class="built_in">repp</span>(i, <span class="number">1</span>, n)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="built_in">scanf</span>(<span class="string">&quot;%lld&quot;</span>, &amp;val[i]);</span><br><span class="line">		sum[i] = sum[i - <span class="number">1</span>] + val[i];</span><br><span class="line">	&#125;</span><br><span class="line">	ll res = <span class="number">0</span>;</span><br><span class="line">	<span class="keyword">for</span> (<span class="type">int</span> i = n; i &gt;= <span class="number">2</span>; i--)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="keyword">if</span> (i == n)res = sum[i];</span><br><span class="line">		<span class="keyword">else</span> <span class="keyword">if</span> (res &lt; sum[i] - res)</span><br><span class="line">		&#123;</span><br><span class="line">			res = sum[i] - res;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;%lld\n&quot;</span>, res);</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="F-Video-Cards"><a href="#F-Video-Cards" class="headerlink" title="F Video Cards"></a>F Video Cards</h3><blockquote>
<p>有$n$个数，可以以任意一个数作为开头，其余的数必须减小到是这个数的整数倍，记这个数列的和。问所有情况下的和的最大值。</p>
</blockquote>
<p>注意数的范围都是小于200000的，那么就可以求前缀和，枚举每一个数作为基底，其2倍,3倍…的数。复杂度$O(nlogn)$</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://2997ms.github.io/2016/10/19/CP/Codeforces/Technocup-2017-Elimination-Round-1/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="2997ms">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="2997ms">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | 2997ms">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2016/10/19/CP/Codeforces/Technocup-2017-Elimination-Round-1/" class="post-title-link" itemprop="url">Technocup 2017 - Elimination Round 1</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2016-10-19 18:03:25" itemprop="dateCreated datePublished" datetime="2016-10-19T18:03:25+01:00">2016-10-19</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2016-10-22 11:11:29" itemprop="dateModified" datetime="2016-10-22T11:11:29+01:00">2016-10-22</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E9%A2%98%E8%AE%B0/" itemprop="url" rel="index"><span itemprop="name">题记</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>最近去参加了复旦大学举办的Hackx_FDU，收获满满~ 看到了很多大神，然后也赞叹于一群人在短时间内可以写出如此美妙的代码。</p>
<p>这个Technocup是我Hackx比赛的时候没有吃晚饭，偷着两个小时打的。。。然而效果非常不好。。。自己脑袋犯困，另外也挺着急的。。。B题挂在精度上了。。。C题也脑残了好久啊。。。才出掉。。。</p>
<p><a target="_blank" rel="noopener" href="http://codeforces.com/contest/727">题目链接</a>与<a target="_blank" rel="noopener" href="https://github.com/2997ms/My_Algorithm/tree/master/Codeforces/Technocup%202017%20%E2%80%94%20Elimination%20Round%201">代码链接</a></p>
<h3 id="A-Transformation-from-A-to-B"><a href="#A-Transformation-from-A-to-B" class="headerlink" title="A  Transformation: from A to B"></a>A  Transformation: from A to B</h3><blockquote>
<p>一个数字可以乘$2$，也可以乘$10+1$，问从$A$变到$B$的方案。</p>
</blockquote>
<p>宽搜。</p>
<h3 id="B-Bill-Total-Value"><a href="#B-Bill-Total-Value" class="headerlink" title="B Bill Total Value"></a>B Bill Total Value</h3><blockquote>
<p>题意是给出一个字符串，里面是各个物品的价钱，如果小数点后面是两位的话，代表是小数。三位的话就是整数。问价钱总和。</p>
</blockquote>
<p>莫名其妙地卡精度。。。本地运行OK，提交上去一直WA。下把这种情况直接乘以100，换成整数运算。。。</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">char</span> x[maxn];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">solve</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="built_in">scanf</span>(<span class="string">&quot;%s&quot;</span>, x + <span class="number">1</span>);</span><br><span class="line">	ll res = <span class="number">0</span>;</span><br><span class="line">	<span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; x[i]; i++)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="keyword">if</span> (<span class="built_in">isalpha</span>(x[i]))<span class="keyword">continue</span>;</span><br><span class="line">		ll t = <span class="number">0</span>;</span><br><span class="line">		<span class="type">int</span> dot = <span class="number">-1</span>;</span><br><span class="line">		<span class="keyword">while</span> (x[i]&amp;&amp;!<span class="built_in">isalpha</span>(x[i]))</span><br><span class="line">		&#123;</span><br><span class="line">			<span class="keyword">if</span> (x[i] == <span class="string">&#x27;.&#x27;</span>)</span><br><span class="line">			&#123;</span><br><span class="line">				dot = i;</span><br><span class="line">			&#125;</span><br><span class="line">			<span class="keyword">else</span></span><br><span class="line">			&#123;</span><br><span class="line">				t = t * <span class="number">10</span> + x[i] - <span class="string">&#x27;0&#x27;</span>;</span><br><span class="line">			&#125;</span><br><span class="line">			i++;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">if</span> (dot == <span class="number">-1</span> || i - dot == <span class="number">4</span>)</span><br><span class="line">		&#123;</span><br><span class="line">			t *= <span class="number">100</span>;</span><br><span class="line">		&#125;</span><br><span class="line">		res += t;</span><br><span class="line">		i--;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">if</span> (res &lt; <span class="number">100</span>)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">&quot;0.%02lld\n&quot;</span>, res);</span><br><span class="line">		<span class="keyword">return</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	vector&lt;<span class="type">int</span>&gt;r;</span><br><span class="line">	<span class="keyword">while</span> (res)</span><br><span class="line">	&#123;</span><br><span class="line">		r.<span class="built_in">push_back</span>(res % <span class="number">10</span>);</span><br><span class="line">		res /= <span class="number">10</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="built_in">reverse</span>(r.<span class="built_in">begin</span>(), r.<span class="built_in">end</span>());</span><br><span class="line"></span><br><span class="line">	<span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; r.<span class="built_in">size</span>()<span class="number">-2</span>; i++)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">&quot;%d&quot;</span>, r[i]);</span><br><span class="line">		<span class="keyword">if</span> ((r.<span class="built_in">size</span>() - <span class="number">2</span> - (i+<span class="number">1</span>)) % <span class="number">3</span> == <span class="number">0</span> &amp;&amp; i != r.<span class="built_in">size</span>() - <span class="number">3</span>)</span><br><span class="line">		&#123;</span><br><span class="line">			<span class="built_in">printf</span>(<span class="string">&quot;.&quot;</span>);</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">if</span> (r[r.<span class="built_in">size</span>() - <span class="number">1</span>] == <span class="number">0</span> &amp;&amp; r[r.<span class="built_in">size</span>() - <span class="number">2</span>] == <span class="number">0</span>)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="keyword">return</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">else</span></span><br><span class="line">	&#123;</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">&quot;.%d%d\n&quot;</span>, r[r.<span class="built_in">size</span>() - <span class="number">2</span>], r[r.<span class="built_in">size</span>() - <span class="number">1</span>]);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="C-Guess-the-Array"><a href="#C-Guess-the-Array" class="headerlink" title="C Guess the Array"></a>C Guess the Array</h3><blockquote>
<p>题意对长度为$N$的数组，可以询问$N$个两个元素之间的和。最后输出这个数组。</p>
</blockquote>
<p>又智障啊。。。思路一直是死的，询问1 2&#x2F;2 3&#x2F;3 4&#x2F;..&#x2F;n..1，但其实这样是可以最后推出来的，也就是这样是多解啊。。所以说直接求 12&#x2F; 2 3&#x2F; 3 1把前三个元素干出来之后，剩余元素也就出来了。。真的智障。。。WA5次，最后才搞出来。</p>
<h3 id="D-T-shirts-Distribution"><a href="#D-T-shirts-Distribution" class="headerlink" title="D T-shirts Distribution"></a>D T-shirts Distribution</h3><blockquote>
<p>每个人穿衣服可以有固定的大小，也可以在两种型号(两种型号必相邻)之间选择一个。现在给出6种衣服的数量，问衣服的分配情况。</p>
</blockquote>
<p>水题。。直接从最小的开始贪。。</p>
<h3 id="E-Games-on-a-CD"><a href="#E-Games-on-a-CD" class="headerlink" title="E Games on a CD"></a>E Games on a CD</h3><blockquote>
<p>每个名字的长度是相等的，现在给出$g$个字符串，从这$g$个字符串里面选出$n$个，顺时针的情况下可以组成给定字符即可。。</p>
</blockquote>
<p>AC自动机，因为长度等长，也不可能有覆盖的情况，所以直接跑一遍，看最终是否有重复+数量够不够。</p>
<h3 id="F-Polycarp’s-problems"><a href="#F-Polycarp’s-problems" class="headerlink" title="F Polycarp’s problems"></a>F Polycarp’s problems</h3><blockquote>
<p>给出一个长度为$n$的数组$a_i$，然后起始的值为$b_i$，要求在起始的值为$b_i$的情况下，遇到一个$a_i$就相加，但不能有小于等于0的情况，问最后要去掉多少个值。现在有m个询问，对于每一个$b_i$都要求一次最小去掉的数量。</p>
</blockquote>
<p>二分取$1$到$n$个所要具备的最小值，然后在结果里面再次二分。</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://2997ms.github.io/2016/10/13/CP/AtCoder/CODE-FESTIVAL-2016-Qualification-Round-B/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="2997ms">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="2997ms">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | 2997ms">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2016/10/13/CP/AtCoder/CODE-FESTIVAL-2016-Qualification-Round-B/" class="post-title-link" itemprop="url">CODE FESTIVAL 2016 Qualification Round B</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>
      

      <time title="Created: 2016-10-13 21:07:20 / Modified: 14:15:40" itemprop="dateCreated datePublished" datetime="2016-10-13T21:07:20+01:00">2016-10-13</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E9%A2%98%E8%AE%B0/" itemprop="url" rel="index"><span itemprop="name">题记</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p><a target="_blank" rel="noopener" href="http://code-festival-2016-qualb.contest.atcoder.jp/assignments">题目链接</a>与<a target="_blank" rel="noopener" href="https://github.com/2997ms/My_Algorithm/tree/master/AtCoder/CODE%20FESTIVAL%202016%20Qualification%20Round%20B">代码链接</a></p>
<p>非常难得这次做出四道题(A和B已经无法更水了)。大中午的特别困，中间睡了一个小时，之后把C和D搞出来了。E题的这个Trie很赞。。。</p>
<h3 id="C-Gr-idian-MST"><a href="#C-Gr-idian-MST" class="headerlink" title="C - Gr-idian MST"></a>C - Gr-idian MST</h3><blockquote>
<p>题意是给出了$W \times H$的格子，然后每个格子之间都有一个相互连接的代价，格子$(i,j)$到格子$(i+1,j)$对于任意的$j$代价均为$p_i$，格子$(i,j)$到格子$(i,j+1)$对于任意的$i$代价均为$q_j$。问最终把格子连接成为一个整体需要的最小代价。</p>
</blockquote>
<p>一开始往并查集那里去考虑，发现数量级有一些大啊。。。之后找规律，不断找最小值，然后如果是x方向的，那么下一次y就少了1。如果是y方向的，下一次x就少了1。</p>
<h3 id="D-Greedy-customers"><a href="#D-Greedy-customers" class="headerlink" title="D - Greedy customers"></a>D - Greedy customers</h3><blockquote>
<p>题意是有$N$个顾客站成一排，每个顾客手里有$A_i$元钱，现在由你出价，从顾客1开始，如果出的价钱小于等于他手里的钱，那么他会买走你的物品。题目要求最后每个顾客手里的钱不能为0，问最多能够卖多少物品。</p>
</blockquote>
<p>在比赛结束一分钟之前，情况考虑得都不是很周全，慌乱中自己提交，竟然还过了。。。后来发现情况确实考虑得不好，只能说幸运。</p>
<p>首先肯定是可以将卖的价钱最终变成一个升序的数列，而又不影响最终的买卖情况的。</p>
<p>那就考虑从价钱1开始，卖给第一个用户，将其剩下1块。价钱$x$就从2开始，对于可以整除$x$的钱$N$，可以卖出去$N&#x2F;x-1$件物品，而$x$不需要+1，因为最后一件可以卖成$x+1$，使得该位置剩下的钱小于$x$元。而如果遇到$val[i]&#x3D;x$这种情况，那没办法了，$x$只能加1。</p>
<h3 id="E-Lexicographical-disorder"><a href="#E-Lexicographical-disorder" class="headerlink" title="E - Lexicographical disorder"></a>E - Lexicographical disorder</h3><blockquote>
<p>题意是给出了$N$个字符串，$Q$个询问$k_i, p$，每一个询问是算第$k_i$个字符串，在该字典序中所排列的位置。</p>
</blockquote>
<p>建立Trie树，记录每一个位置的值，查询的时候算每一个字符串在同一个位置上其他字符的数量，以及结束字符的数量。解法真的很亮。。。</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://2997ms.github.io/2016/10/12/CP/Google/Google-Code-Jam-Round-1A-2008/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="2997ms">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="2997ms">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | 2997ms">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2016/10/12/CP/Google/Google-Code-Jam-Round-1A-2008/" class="post-title-link" itemprop="url">Google Code Jam Round 1A 2008</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2016-10-12 22:37:08" itemprop="dateCreated datePublished" datetime="2016-10-12T22:37:08+01:00">2016-10-12</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2016-10-13 13:06:01" itemprop="dateModified" datetime="2016-10-13T13:06:01+01:00">2016-10-13</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E9%A2%98%E8%AE%B0/" itemprop="url" rel="index"><span itemprop="name">题记</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p><a target="_blank" rel="noopener" href="https://code.google.com/codejam/contest/32016/dashboard">题目链接</a>与<a target="_blank" rel="noopener" href="https://github.com/2997ms/My_Algorithm/tree/master/Google/GCJ%20Round%201A%202008">代码链接</a></p>
<p>一开始只是特别想记一下C题，后来发现B题也不错。。。</p>
<h3 id="A-Minimum-Scalar-Product"><a href="#A-Minimum-Scalar-Product" class="headerlink" title="A Minimum Scalar Product"></a>A Minimum Scalar Product</h3><blockquote>
<p>题意是给出了两个$n$维的向量，你可以对这$n$个向量的坐标任意排序，使得他们之间的scalar product(点积$x_1y_1+x_2y_2+…+x_ny_n$)最小。问这个最小点积。</p>
</blockquote>
<p>一个正向排序，一个逆向排序。</p>
<h3 id="B-Milkshakes"><a href="#B-Milkshakes" class="headerlink" title="B Milkshakes"></a>B Milkshakes</h3><blockquote>
<p>题意是给出了$n$种物品，每种物品可0可1。$m$种顾客，每一个顾客有$T$个要求，每个要求”$X Y$”代表第$X$个物品是$Y$($Y$是0或者1)，其中$Y&#x3D;1$每个顾客至多一种。要求对每一个顾客至少满足他的一个要求，满足所有顾客的情况下，0的数量最少。如果不可能，输出”IMPOSSIBLE”。</p>
</blockquote>
<p>对每一个为0的物品和顾客一个一个检查，如果对一个顾客有一个满足条件的即跳出循环。有为1要求的记录下来，下一次将其改为1。如果都是1，而顾客要求为0导致的都不满足要求的情况，那就直接输出”IMPOSSIBLE”。</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">solve</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="built_in">memset</span>(state, <span class="number">0</span>, <span class="built_in">sizeof</span>(state));</span><br><span class="line">	<span class="built_in">memset</span>(num, <span class="number">0</span>, <span class="built_in">sizeof</span>(num));</span><br><span class="line">	<span class="built_in">memset</span>(chan, <span class="number">0</span>, <span class="built_in">sizeof</span>(chan));</span><br><span class="line"></span><br><span class="line">	<span class="built_in">scanf</span>(<span class="string">&quot;%d%d&quot;</span>, &amp;n, &amp;m);</span><br><span class="line">	<span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt;= m; i++)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;num[i]);</span><br><span class="line">		<span class="keyword">for</span> (<span class="type">int</span> j = <span class="number">1</span>; j &lt;= num[i]; j++)</span><br><span class="line">		&#123;</span><br><span class="line">			<span class="type">int</span> u, v;</span><br><span class="line">			<span class="built_in">scanf</span>(<span class="string">&quot;%d%d&quot;</span>, &amp;u, &amp;v);</span><br><span class="line">			chan[i][j][<span class="number">0</span>] = u;</span><br><span class="line">			chan[i][j][<span class="number">1</span>] = v;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="type">int</span> fini = <span class="number">0</span>;</span><br><span class="line">	<span class="type">int</span> imp = <span class="number">0</span>;</span><br><span class="line">	<span class="keyword">while</span> (!fini)</span><br><span class="line">	&#123;</span><br><span class="line">		fini = <span class="number">1</span>;</span><br><span class="line">		<span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt;= m; i++)</span><br><span class="line">		&#123;</span><br><span class="line">			<span class="type">int</span> k = <span class="number">-1</span>;</span><br><span class="line">			<span class="type">int</span> j = <span class="number">1</span>;</span><br><span class="line">			<span class="keyword">for</span> (j = <span class="number">1</span>; j &lt;= num[i]; j++)</span><br><span class="line">			&#123;</span><br><span class="line">				<span class="keyword">if</span> (state[chan[i][j][<span class="number">0</span>]] == chan[i][j][<span class="number">1</span>])</span><br><span class="line">				&#123;</span><br><span class="line">					<span class="keyword">break</span>;</span><br><span class="line">				&#125;</span><br><span class="line">				<span class="keyword">if</span> (chan[i][j][<span class="number">1</span>] == <span class="number">1</span>)</span><br><span class="line">				&#123;</span><br><span class="line">					k = j;</span><br><span class="line">				&#125;</span><br><span class="line">			&#125;</span><br><span class="line">			<span class="keyword">if</span> (j &gt; num[i])</span><br><span class="line">			&#123;</span><br><span class="line">				<span class="keyword">if</span> (k == <span class="number">-1</span>)</span><br><span class="line">				&#123;</span><br><span class="line">					fini = <span class="number">1</span>;</span><br><span class="line">					imp = <span class="number">1</span>;</span><br><span class="line">					<span class="keyword">break</span>;</span><br><span class="line">				&#125;</span><br><span class="line">				fini = <span class="number">0</span>;</span><br><span class="line">				state[chan[i][k][<span class="number">0</span>]] = <span class="number">1</span>;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">if</span> (imp)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="built_in">puts</span>(<span class="string">&quot;IMPOSSIBLE&quot;</span>);</span><br><span class="line">		<span class="keyword">return</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; i++)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="keyword">if</span> (i &gt; <span class="number">1</span>)</span><br><span class="line">		&#123;</span><br><span class="line">			<span class="built_in">printf</span>(<span class="string">&quot; &quot;</span>);</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">&quot;%d&quot;</span>, state[i]);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;\n&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="C-Numbers"><a href="#C-Numbers" class="headerlink" title="C Numbers"></a>C Numbers</h3><blockquote>
<p>题意很简单，求$(3+\sqrt{5})^n$的最后三个整数部分的值。</p>
</blockquote>
<p>这个是一个很经典的问题了，特意来记录一下。</p>
<p>设$a&#x3D;3+\sqrt{5}$，$b&#x3D;3-\sqrt{5}$，$x_n&#x3D;a^n+b^n$。</p>
<p>会发现得到的$x_n$是一个整数，另外由于$b_n&lt;1$，所以得到的$x_n$是大于结果的第一个整数。所以现在考虑求这个$x_n$。</p>
<p>然后对于$x^{n+1}$来说，有$(3+\sqrt{5})(a_n+b_n*\sqrt{5})&#x3D;(3a_n+5b_n)+(3b_n+a_n)*\sqrt{5}$，那么可以得到$a_{n+1}&#x3D;3a_n+5b_n$，$b_{n+1}&#x3D;3b_n+a_n$。</p>
<p>这样可以化成矩阵的形式：<br>$$<br>\begin{pmatrix}<br>   a_{n} \<br>   b_{n+1}<br>  \end{pmatrix}&#x3D;A\begin{pmatrix}<br>   a_{n-1} \<br>   b_{n-1}<br>  \end{pmatrix}&#x3D;A_{n}\begin{pmatrix}<br>   a_{0} \<br>   b_{0}<br>  \end{pmatrix}<br>$$<br>其中<br>$$<br>A&#x3D;\begin{pmatrix}<br>   3&amp;5 \<br>   1&amp;3<br>  \end{pmatrix}<br>$$<br>因为$a_0&#x3D;1$,可以得到$(a_0,b_0)&#x3D;(1,0)$</p>
<p><del>太困了。。。明天接着填。。。。</del></p>
<p>这样就可以矩阵快速幂啦~</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://2997ms.github.io/2016/10/09/BB/2016/2016-9%E6%9C%88-%E5%90%AD%E5%93%A7%E5%92%94%E5%93%A7/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="2997ms">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="2997ms">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | 2997ms">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2016/10/09/BB/2016/2016-9%E6%9C%88-%E5%90%AD%E5%93%A7%E5%92%94%E5%93%A7/" class="post-title-link" itemprop="url">2016_9月_吭哧咔哧</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2016-10-09 14:40:55" itemprop="dateCreated datePublished" datetime="2016-10-09T14:40:55+01:00">2016-10-09</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2017-05-03 09:57:38" itemprop="dateModified" datetime="2017-05-03T09:57:38+01:00">2017-05-03</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E6%89%80%E8%AF%B4/" itemprop="url" rel="index"><span itemprop="name">所说</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <blockquote>
<p>九月份开学，到现在为止一个月，总结一下最近这一个月都做了一些什么。话说，在10月都过了三分之一的时候写这个是有一些尴尬。。。</p>
</blockquote>
<p>现在做的这个东西希望监测未知程序的网络行为即其收发的信息，ip地址和端口。</p>
<p>首先从网上找了一下Client端和Server端，简单改了改，主要代码如下：</p>
<p>Server端:</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;WINSOCK2.H&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">pragma</span> comment(lib,<span class="string">&quot;ws2_32.lib&quot;</span>)</span></span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    WORD myVersionRequest;</span><br><span class="line">    WSADATA wsaData;</span><br><span class="line">    myVersionRequest = <span class="built_in">MAKEWORD</span>(<span class="number">1</span>,<span class="number">1</span>);</span><br><span class="line">    <span class="type">int</span> err;</span><br><span class="line">    err = <span class="built_in">WSAStartup</span>(myVersionRequest,&amp;wsaData);</span><br><span class="line"> </span><br><span class="line">    <span class="keyword">if</span>(!err)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;Server success.\n&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;Server failed.\n&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    SOCKET serSocket = <span class="built_in">socket</span>(AF_INET,SOCK_STREAM,<span class="number">0</span>);</span><br><span class="line">     </span><br><span class="line">    <span class="comment">//需要绑定的参数</span></span><br><span class="line">    SOCKADDR_IN addr;</span><br><span class="line">    addr.sin_family = AF_INET;</span><br><span class="line">    addr.sin_addr.S_un.S_addr=<span class="built_in">htonl</span>(INADDR_ANY);<span class="comment">//ip地址</span></span><br><span class="line">    addr.sin_port=<span class="built_in">htons</span>(<span class="number">6000</span>);<span class="comment">//绑定端口</span></span><br><span class="line">   </span><br><span class="line">    <span class="built_in">bind</span>(serSocket,(SOCKADDR*)&amp;addr,<span class="built_in">sizeof</span>(SOCKADDR));<span class="comment">//绑定完成</span></span><br><span class="line">    <span class="built_in">listen</span>(serSocket,<span class="number">5</span>);<span class="comment">//其中第二个参数代表能够接收的最多的连接数</span></span><br><span class="line">   </span><br><span class="line">    SOCKADDR_IN clientsocket;</span><br><span class="line">    <span class="type">int</span> len = <span class="built_in">sizeof</span>(SOCKADDR);</span><br><span class="line">    <span class="keyword">while</span> (<span class="number">1</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        SOCKET serConn = <span class="built_in">accept</span>(serSocket,(SOCKADDR*)&amp;clientsocket,&amp;len);</span><br><span class="line">        <span class="type">char</span> sendBuf[<span class="number">100</span>];</span><br><span class="line">    </span><br><span class="line">        <span class="built_in">sprintf</span>(sendBuf,<span class="string">&quot;welcome %s to bejing&quot;</span>,<span class="built_in">inet_ntoa</span>(clientsocket.sin_addr));<span class="comment">//找对对应的IP并且将这行字打印到那里</span></span><br><span class="line">        <span class="built_in">send</span>(serConn,sendBuf,<span class="built_in">strlen</span>(sendBuf)+<span class="number">1</span>,<span class="number">0</span>);</span><br><span class="line">        <span class="type">char</span> receiveBuf[<span class="number">100</span>];<span class="comment">//接收</span></span><br><span class="line">        <span class="built_in">recv</span>(serConn,receiveBuf,<span class="built_in">strlen</span>(receiveBuf)+<span class="number">1</span>,<span class="number">0</span>);</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;%s\n&quot;</span>,receiveBuf);</span><br><span class="line">        <span class="built_in">closesocket</span>(serConn);<span class="comment">//关闭</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">WSACleanup</span>();<span class="comment">//释放资源的操作</span></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Client端：</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;WINSOCK2.H&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">pragma</span> comment(lib,<span class="string">&quot;ws2_32.lib&quot;</span>)</span></span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="type">int</span> err;</span><br><span class="line">    WORD versionRequired;</span><br><span class="line">    WSADATA wsaData;</span><br><span class="line">    versionRequired = <span class="built_in">MAKEWORD</span>(<span class="number">1</span>,<span class="number">1</span>);</span><br><span class="line">    err = <span class="built_in">WSAStartup</span>(versionRequired,&amp;wsaData);<span class="comment">//协议库的版本信息</span></span><br><span class="line">    <span class="keyword">if</span> (!err)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;Client success\n&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;Client failed\n&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">     </span><br><span class="line">    SOCKET clientSocket = <span class="built_in">socket</span>(AF_INET,SOCK_STREAM,<span class="number">0</span>);</span><br><span class="line">    SOCKADDR_IN clientsock_in;</span><br><span class="line">    clientsock_in.sin_addr.S_un.S_addr=<span class="built_in">inet_addr</span>(<span class="string">&quot;127.0.0.1&quot;</span>);</span><br><span class="line">    clientsock_in.sin_family = AF_INET;</span><br><span class="line">    clientsock_in.sin_port = <span class="built_in">htons</span>(<span class="number">6000</span>);</span><br><span class="line">     </span><br><span class="line">    <span class="built_in">connect</span>(clientSocket,(SOCKADDR*)&amp;clientsock_in,<span class="built_in">sizeof</span>(SOCKADDR));</span><br><span class="line">     </span><br><span class="line">    <span class="type">char</span> receiveBuf[<span class="number">100</span>];</span><br><span class="line">    <span class="built_in">recv</span>(clientSocket,receiveBuf,<span class="number">101</span>,<span class="number">0</span>);</span><br><span class="line">     </span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%s\n&quot;</span>,receiveBuf);</span><br><span class="line">     </span><br><span class="line">    <span class="built_in">send</span>(clientSocket,<span class="string">&quot;hello,this is client&quot;</span>,<span class="built_in">strlen</span>(<span class="string">&quot;hello,this is client&quot;</span>)+<span class="number">1</span>,<span class="number">0</span>);</span><br><span class="line">     </span><br><span class="line">    <span class="built_in">closesocket</span>(clientSocket);</span><br><span class="line">    <span class="built_in">WSACleanup</span>();</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>之后上网查找资料得知，程序进行网络行为是通过调用Ring0层下的NtDeviceIoControlFile函数，关于这个函数的信息如下：</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">NTSTATUS <span class="title">ZwDeviceIoControlFile</span></span></span><br><span class="line"><span class="function">       <span class="params">(</span></span></span><br><span class="line"><span class="params"><span class="function">             _In_      HANDLE           FileHandle,</span></span></span><br><span class="line"><span class="params"><span class="function">             _In_opt_  HANDLE           Event,</span></span></span><br><span class="line"><span class="params"><span class="function">             _In_opt_  PIO_APC_ROUTINE  ApcRoutine,</span></span></span><br><span class="line"><span class="params"><span class="function">             _In_opt_  PVOID            ApcContext,</span></span></span><br><span class="line"><span class="params"><span class="function">             _Out_     PIO_STATUS_BLOCK IoStatusBlock,</span></span></span><br><span class="line"><span class="params"><span class="function">             _In_      ULONG            IoControlCode,<span class="comment">//行为类型，这个变量的值决定了InputBuffer和OutputBuffer的格式和长度</span></span></span></span><br><span class="line"><span class="params"><span class="function">             _In_opt_  PVOID            InputBuffer,</span></span></span><br><span class="line"><span class="params"><span class="function">             _In_      ULONG            InputBufferLength,</span></span></span><br><span class="line"><span class="params"><span class="function">             _Out_opt_ PVOID            OutputBuffer,</span></span></span><br><span class="line"><span class="params"><span class="function">             _In_      ULONG            OutputBufferLength</span></span></span><br><span class="line"><span class="params"><span class="function">       )</span></span>;</span><br></pre></td></tr></table></figure>

<p>参数主要在第5个(从0算起)IoControlCode，分为很多行为：</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*IoControlCode*/</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> IO_AFD_BIND 0x12003 </span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> IO_AFD_CONNECT 0x12007 </span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> IO_AFD_SET_CONTEXT 0x12047 </span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> IO_AFD_RECV 0x12017 </span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> IO_AFD_SEND 0x1201f </span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> IO_AFD_SELECT 0x12024</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> IO_AFD_SENDTO 0x12023</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> IO_AFD_RECVFROM 0x1201B</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> IO_AFD_GET_INFO 0x1207B</span></span><br></pre></td></tr></table></figure>

<p>然后通过判断IO_AFD_RECV与IO_AFD_SEND就可以在未知程序执行时对其进行插桩，顺利地得到了它们收发的socket。其中RECV的socket是在函数执行之后的OutputBuffer里，SEND的socket在函数进入时的InputBuffer里。主要代码如下：</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span>(<span class="keyword">this</span>-&gt;Device_io_con == IO_AFD_SEND)</span><br><span class="line">    &#123;</span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;\tEnter_IO_AFD_SEND&quot;</span> &lt;&lt; endl;</span><br><span class="line"> </span><br><span class="line">        PAFD_INFO input_buffer = (PAFD_INFO)<span class="built_in">PIN_GetSyscallArgument</span>(ctx, std, <span class="number">6</span>);</span><br><span class="line">        WINDOWS::ULONG input_buffer_len = (WINDOWS::ULONG)<span class="built_in">PIN_GetSyscallArgument</span>(ctx,std,<span class="number">7</span>);</span><br><span class="line"> </span><br><span class="line">        <span class="keyword">if</span>(input_buffer)</span><br><span class="line">        &#123;</span><br><span class="line">            cout &lt;&lt; <span class="string">&quot;\tinput_buffer_length: &quot;</span> &lt;&lt; input_buffer_len &lt;&lt; endl;</span><br><span class="line">            <span class="keyword">if</span>(input_buffer-&gt;BufferArray)</span><br><span class="line">            &#123;</span><br><span class="line">                cout &lt;&lt; <span class="string">&quot;\tSend: &quot;</span> &lt;&lt; input_buffer-&gt;BufferArray-&gt;buf &lt;&lt; endl;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span>(val-&gt;IoControlCode == IO_AFD_RECV)</span><br><span class="line">      &#123;</span><br><span class="line">          cout &lt;&lt; <span class="string">&quot;\texit_IO_AFD_RECV&quot;</span> &lt;&lt; endl;</span><br><span class="line">          PAFD_INFO output_buffer = (PAFD_INFO)(val-&gt;OutputBuffer);</span><br><span class="line">          <span class="keyword">if</span>(output_buffer)</span><br><span class="line">          &#123;</span><br><span class="line">              <span class="keyword">if</span>(output_buffer-&gt;BufferArray)</span><br><span class="line">              &#123;</span><br><span class="line">                  cout &lt;&lt; <span class="string">&quot;\tRecv: &quot;</span> &lt;&lt; output_buffer-&gt;BufferArray-&gt;buf &lt;&lt; endl;</span><br><span class="line">              &#125;</span><br><span class="line">          &#125;</span><br><span class="line">      &#125;</span><br></pre></td></tr></table></figure>

<p>使用Pin进行二进制插桩之后的运行结果如下：</p>
<p><img src="https://raw.githubusercontent.com/2997ms/My_Algorithm/master/source_pic/report/1.jpg" alt="image"></p>
<p>到这里我都不禁为我强劲的学习能力鼓掌了，太TM牛cha了。之后找ip和端口很明显了嘛，就在bind或者connect里面喽，结果。。。令我痛不欲生的事情就接踵而至了。</p>
<p><a target="_blank" rel="noopener" href="https://msdn.microsoft.com/en-us/library/windows/hardware/ff566441.aspx">msdn</a>给的信息极其有限，根据程序调用函数的日志中可以知晓，在程序的一个执行区间中多次调用NtDeviceIoControlFile，并且之前的行为与之后的行为都没有太多关联，所以ip与端口的信息只可能存在于NtDeviceIoControlFile里面。</p>
<p><img src="https://raw.githubusercontent.com/2997ms/My_Algorithm/master/source_pic/report/2.jpg" alt="image"></p>
<p>然后判断行为得知，信息应该存在于IO_AFD_BIND，IO_AFD_SET_CONNECT，IO_AFD_CONNECT之中。</p>
<p>之前我对AFD这个东西是完全不了解的，直到发现了这篇<a target="_blank" rel="noopener" href="http://blog.csdn.net/lziog/article/details/6530501">blog</a>，了解到AFD这个东西是存在于socket接口与TDI接口令之间的结构，本质上是一个TDI的客户端，在底层通过调用TDI接口来实现网络部件的TCP&#x2F;IP功能。当然这篇文章是讲通过Hook对流量进行控制的，与我要做的没什么关系。</p>
<p>好，现在发现BIND和CONNECT并没有合适的struct。。。在谷歌上搜索得到的信息寥寥，在论坛上发现了一篇<a target="_blank" rel="noopener" href="http://www.debugman.com/archiver/tid/3715">这个</a>。哇，这个就是AFD_BIND的struct？然后又在msdn上找到了<a target="_blank" rel="noopener" href="https://msdn.microsoft.com/en-us/library/windows/hardware/ff565674.aspx">TRANSPORT_ADDRESS</a>，最后又是这里面的<a target="_blank" rel="noopener" href="https://msdn.microsoft.com/en-us/library/windows/hardware/ff564240.aspx">TA_ADDRESS</a>，根据下面的说明将Address输出，发现结果是乱码。。。</p>
<p>就在这时在论坛上找到了关于TDI过滤获取IP及端口的<a target="_blank" rel="noopener" href="http://www.lai18.com/content/8234443.html">帖子</a>，借鉴了一下取ip和端口的方法</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">PTDI_ADDRESS_IP TDI_data ;</span><br><span class="line">  <span class="keyword">typedef</span> <span class="keyword">struct</span> <span class="title class_">_NETWORK_ADDRESS</span></span><br><span class="line">  &#123;</span><br><span class="line"> <span class="type">unsigned</span> <span class="type">char</span> address [<span class="number">4</span>];</span><br><span class="line"> <span class="type">unsigned</span> <span class="type">char</span> port [<span class="number">2</span>];</span><br><span class="line">  &#125; NETWORK_ADDRESS ;</span><br><span class="line"> </span><br><span class="line">  NETWORK_ADDRESS data ; </span><br><span class="line">  <span class="type">unsigned</span> <span class="type">short</span> Port =<span class="number">0</span>;</span><br><span class="line">  <span class="type">unsigned</span> <span class="type">long</span> Address =<span class="number">0</span>;</span><br><span class="line">  StackIrpPointer=<span class="built_in">IoGetCurrentIrpStackLocation</span>(Irp);</span><br><span class="line">  ....</span><br><span class="line">  <span class="comment">//这里判断如果StackIrpPointer-&gt;MinorFunction == TDI_CONNECT的话就输出IP及端口信息</span></span><br><span class="line">  ....</span><br><span class="line">  TDI_connectRequest =( PTDI_REQUEST_KERNEL_CONNECT )(&amp; StackIrpPointer -&gt; Parameters );</span><br><span class="line">  TA_Address_data =( ( PTRANSPORT_ADDRESS )( TDI_connectRequest -&gt; RequestConnectionInformation -&gt;RemoteAddress ))-&gt; Address ;</span><br><span class="line">  TDI_data = ( PTDI_ADDRESS_IP ) ( TA_Address_data -&gt; Address );</span><br><span class="line">  </span><br><span class="line">  Address = TDI_data -&gt; in_addr ;</span><br><span class="line">  Port = TDI_data -&gt; sin_port ;</span><br><span class="line"> </span><br><span class="line">  data . address [<span class="number">0</span>] = (( <span class="type">char</span> *)&amp; Address )[<span class="number">0</span>];</span><br><span class="line">  data . address [<span class="number">1</span>] = (( <span class="type">char</span> *)&amp; Address )[<span class="number">1</span>];</span><br><span class="line">  data . address [<span class="number">2</span>] = (( <span class="type">char</span> *)&amp; Address )[<span class="number">2</span>];</span><br><span class="line">  data . address [<span class="number">3</span>] = (( <span class="type">char</span> *)&amp; Address )[<span class="number">3</span>];</span><br><span class="line">   </span><br><span class="line">  data . port [<span class="number">0</span>] = (( <span class="type">char</span> *)&amp; Port )[<span class="number">0</span>];</span><br><span class="line">  data . port [<span class="number">1</span>] = (( <span class="type">char</span> *)&amp; Port )[<span class="number">1</span>];</span><br><span class="line">  Port = data . port [<span class="number">0</span>] + data . port [<span class="number">1</span>];</span><br></pre></td></tr></table></figure>

<p>我个人是对这个代码有一处不懂的，data中的port如果是char类型的最后相加那一定在254以内啊，最终的port结果输出也确实是很小的数字，这么样的取法得到了ip和端口，但结果不对。</p>
<p>再次搜，找到了这篇<a target="_blank" rel="noopener" href="http://bbs.pediy.com/archive/index.php?t-150693.html">帖子</a>，上面说的是使用ntohs将网络字节顺序转换为主机字节顺序，昨天看到的时候特别兴奋，觉得这个肯定可以，结果输出的还是不对&#x3D; &#x3D;。</p>
<p>另外后面，还找到了一个<a target="_blank" rel="noopener" href="https://doxygen.reactos.org/d7/dd6/struct__AFD__MAPBUF.html">afd手册</a>，又像是发现了一个宝藏，里面包含了好多AFD的定义。根据这些我更加确信自己所使用的方法应该是正确的呀，然后也确实抓到了结果，但结果怎么试验都不正确&#x3D; &#x3D;。</p>
<blockquote>
<p>写到这里发现写得好少啊，第一个月这么过去了。马上要开题了，不知道菜如自己能否毕业。。。接下来的明天要学习DECAF，QEMU，一直叫嚣着要看要看一直没怎么看。每次在列计划的时候都充满希望，信心满满，仿佛一定可以背着好多行囊踏过终点，但每一次真到了终点的时候捧起的往往是失望的残骸，但虽说如此，自己还是很乐观的，在下一个跑道上依旧斗志盎然。这个月看了&lt;&lt;快乐的linux&gt;&gt;，发觉这本书真是好看啊。。。在玩codingame。九月份的大部分时间又是喂了狗，无论怎样，好的坏的，都是珍馐。十月继续战个痛。</p>
</blockquote>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://2997ms.github.io/2016/10/07/CP/Leetcode/LeetCode-21-30/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="2997ms">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="2997ms">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | 2997ms">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2016/10/07/CP/Leetcode/LeetCode-21-30/" class="post-title-link" itemprop="url">LeetCode 21-30</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2016-10-07 22:27:24" itemprop="dateCreated datePublished" datetime="2016-10-07T22:27:24+01:00">2016-10-07</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2020-05-18 11:46:35" itemprop="dateModified" datetime="2020-05-18T11:46:35+01:00">2020-05-18</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E9%A2%98%E8%AE%B0/" itemprop="url" rel="index"><span itemprop="name">题记</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>这一期10道题好难啊。。。好多要记的。</p>
          <!--noindex-->
            <div class="post-button">
              <a class="btn" href="/2016/10/07/CP/Leetcode/LeetCode-21-30/#more" rel="contents">
                Read more &raquo;
              </a>
            </div>
          <!--/noindex-->
        
      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://2997ms.github.io/2016/10/06/CP/Codeforces/Intel-Code-Chanllenge-Elimination-Round/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="2997ms">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="2997ms">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | 2997ms">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2016/10/06/CP/Codeforces/Intel-Code-Chanllenge-Elimination-Round/" class="post-title-link" itemprop="url">Intel Code Chanllenge Elimination Round</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2016-10-06 21:39:17" itemprop="dateCreated datePublished" datetime="2016-10-06T21:39:17+01:00">2016-10-06</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2016-12-27 07:47:51" itemprop="dateModified" datetime="2016-12-27T07:47:51+00:00">2016-12-27</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E9%A2%98%E8%AE%B0/" itemprop="url" rel="index"><span itemprop="name">题记</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p><a target="_blank" rel="noopener" href="http://codeforces.com/contest/722">题目链接</a>与<a target="_blank" rel="noopener" href="https://github.com/2997ms/My_Algorithm/tree/master/Codeforces/Intel%20Code%20Challenge%20Elimination%20Round">代码链接</a></p>
<p>A题在自己知道坑的情况下还是挂了，D题在最后五分钟想出思路，又一次懵逼，没有时间敲完。。。</p>
<h3 id="A-Broken-Clock"><a href="#A-Broken-Clock" class="headerlink" title="*A Broken Clock"></a>*A Broken Clock</h3><blockquote>
<p>题意是给出表的12计时方式与24计时方式，12计时方式时钟在1<del>12的范围内，分钟在0</del>59的范围内。24计时方式时钟在0<del>23的范围内，分钟在0</del>59的范围内。问改动最少的数字，使得给出的时间符合要求。</p>
</blockquote>
<p>注意12计时方式下的20：00这种情况，不是变成01：00而是10：00。。。。</p>
<h3 id="B-Verse-Pattern"><a href="#B-Verse-Pattern" class="headerlink" title="B Verse Pattern"></a>B Verse Pattern</h3><blockquote>
<p>算每一个字符串数组中的元音字符数量是否与给定的数相等。。。</p>
</blockquote>
<h3 id="C-Destroying-Array"><a href="#C-Destroying-Array" class="headerlink" title="C Destroying Array"></a>C Destroying Array</h3><blockquote>
<p>给定一个数组，每次删掉一个数字，问每次删掉之后剩下的连续数字的最大和。</p>
</blockquote>
<p>反过来考虑就是添加数字，每次添加用并查集来合并左右数字，维护最大值。</p>
<h3 id="D-Generating-Sets"><a href="#D-Generating-Sets" class="headerlink" title="*D Generating Sets"></a>*D Generating Sets</h3><blockquote>
<p>题意是有不同的$n$个数，可以任意选一个数$x$，有两种操作，1.$x*2$之后放回去。2.$x*2+1$之后放回去。经过若干次这样的变换之后，变成了给出的数组，要求就是找回最开始的n个数，使得这n个数里面最大的数最小。</p>
</blockquote>
<p>实际上是一颗二叉树，每一次选最大的数除以2，看可不可以占这个位子，不能的话再往上找，直到找不到向上的路径了。</p>
<p>别人都是set就过了，我非得搞个优先队列+map。。。mdzz。</p>
<h3 id="E-Research-Rover"><a href="#E-Research-Rover" class="headerlink" title="*E Research Rover"></a>*E Research Rover</h3><blockquote>
<p>有$n*m$的格子，一开始站在$(1,1)$的点上，有$S$的油量，现在有一些点会让油量减半，问最终到达(n,m)这个格子所剩油的期望。化简之后分数表示成$\frac {P}{Q}$，给出$P*Q^{-1}$的结果，其中$Q^{-1}$代表$Q$模$10^9+7$的逆元。</p>
</blockquote>
<p>首先结果的分数是不用考虑化简的，因为假设$P$和$Q$都有公约数$d$，那么<br>$$<br>P_{d}*d*Q_{d}^{-1}*d^{-1}&#x3D;P*Q^{-1}<br>$$<br>所以$Q$就是从$(1,1)$到$(n,m)$的方案数，$P$即是所有情况下到达的油量总和。</p>
<p>这道题还要发现一点就是$S$最大值是$10^6$，也就是说如果经过了超过20个消耗点，那么就会一直是1了。所以只需要考虑小于等于20个消耗点的情况。</p>
<p>这样的话和<a target="_blank" rel="noopener" href="http://www.51nod.com/onlineJudge/questionCode.html#!problemId=1486">51nod上大大走格子</a>(这个也是codeforces上的。。。)思路就类似了。dp[i][v]表示第$v$个点到终点经过$i$个消耗点的方案数量。从后往前考虑，等于<br>$$<br>dp[i][v] &#x3D; C(n+m-x_v-y_v,n-x_v) - \sum_{j&#x3D;v+1}^{k}C(x_j+y_j-x_v-y_v,x_j-x_v)*dp[i][j] - \sum_{j&#x3D;0}^{i-1} dp[j][v]<br>$$<br>解释一下上面的式子，$C(n+m-x_v-y_v,n-x_v) $是该点到终点的方案总数，减去前面的点经过$i$个点了乘以它到这里的方案数，这块和大大走格子的思路是一致的。这一部分等于它到终点经过$0$到$i$次的，减掉之前的，就是该点经过$i$个点的方案数。最后是(1,1)这个点的方案数乘以油量。</p>
<p>最后考虑经过的数量大于20的情况，$C(n+m-2,n-1)$减去之前算出来的方案数就是剩下的情况，乘以1，添到结果内。</p>
<p>最后这个题卡常，算逆元的话最好用递推式:<br>$$<br>inv[i]&#x3D;(Mod-\frac {Mod}{i})*inv[Mod %i]%Mod<br>$$</p>
<h3 id="F-Cyclic-Cipher"><a href="#F-Cyclic-Cipher" class="headerlink" title="F Cyclic Cipher"></a>F Cyclic Cipher</h3><blockquote>
<p>题意是给出了$n$个序列，每个序列$k_i(1 \leq k_i \leq 40 )$个数，每次序列向右不断循环一位，取每个序列的第一个数再从上到下组成一个序列，算每一个数的最长连续序列，一共进行$10^{100}$次，问在这些中，每个数的最长连续序列是多少。</p>
</blockquote>
<p>会发现如果$x$在连续序列中碰到一起了，假设是在第$S$秒，在第$i$个序列中的位置为$p_i$，第$i$序列的长度为$k_i$，那么会满足下面的条件<br>$$<br>S\equiv p_i (mod\ k_i)<br>$$</p>
<p>$$<br>S\equiv p_j (mod\ k_j)<br>$$</p>
<p>发现这样的话就是<a target="_blank" rel="noopener" href="http://blog.csdn.net/acdreamers/article/details/8050018">中国剩余定理</a>的内容，参考这个的<a target="_blank" rel="noopener" href="http://codeforces.com/blog/entry/47497#comment-318621">评论</a>，可以推出：<br>$$<br>p_i+k_i*x&#x3D;p_j+k_j*y<br>$$</p>
<p>$$<br>\Rightarrow p_i-p_j\ &#x3D; k_j*y-k_i*x<br>$$</p>
<p>$$<br>\Rightarrow p_i-p_j\equiv 0 (mod\ GCD(k_i,k_j))<br>$$</p>
<p>因为在连续序列里面的任意两个都要满足这样的关系，所以枚举右端点，更新左端点即可。</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/9/"><i class="fa fa-angle-left" aria-label="Previous page"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/9/">9</a><span class="page-number current">10</span><a class="page-number" href="/page/11/">11</a><span class="space">&hellip;</span><a class="page-number" href="/page/14/">14</a><a class="extend next" rel="next" href="/page/11/"><i class="fa fa-angle-right" aria-label="Next page"></i></a>
  </nav>

</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">


<div class="copyright">
  &copy; 
  <span itemprop="copyrightYear">2022</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">2997ms</span>
</div>
  <div class="powered-by">Powered by <a href="https://hexo.io/" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.js.org/mist/" rel="noopener" target="_blank">NexT.Mist</a>
  </div>

    </div>
  </footer>

  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script>
<script src="/js/comments.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/schemes/muse.js"></script><script src="/js/next-boot.js"></script>

  





  




<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/gitalk/1.7.2/gitalk.css" integrity="sha256-AJnUHL7dBv6PGaeyPQJcgQPDjt/Hn/PvYZde1iqfp8U=" crossorigin="anonymous">

<script class="next-config" data-name="gitalk" type="application/json">{"enable":true,"github_id":"2997ms","repo":"2997ms.github.io","client_id":"76bfcae1f99647b4ba71","client_secret":"66482f39a2c24a72f65648b0095656f7624db674","admin_user":"2997ms","owner":"2997ms","ID":"location.pathname","labels":"['Gitalk']","createIssueManually":true,"perPage":15,"pagerDirection":"last","distraction_free_mode":true,"proxy":"https://cors-anywhere.azm.workers.dev/https://github.com/login/oauth/access_token","language":"en","js":{"url":"https://cdnjs.cloudflare.com/ajax/libs/gitalk/1.7.2/gitalk.min.js","integrity":"sha256-Pmj85ojLaPOWwRtlMJwmezB/Qg8BzvJp5eTzvXaYAfA="},"path_md5":"fd46efe9cca932ba064caf546fedea22"}</script>
<script src="/js/third-party/comments/gitalk.js"></script>

</body>
</html>
